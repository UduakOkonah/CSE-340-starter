<main class="form-container">
  <h1><%= title %></h1>

<!-- Flash Messages -->
<% if (notice && notice.length > 0) { %>
  <div class="flash-messages">
    <% notice.forEach(msg => { %>
      <ul class="flash"><%= msg %></ul>
    <% }) %>
  </div>
<% } %>

    <!-- Display validation errors -->
    <% if (errors) { %>
    <ul class="notice">
    <% errors.array().forEach(error => { %>
        <li><%= error.msg %></li>
    <% }) %>
    </ul>
    <% } %>

  <!-- Registration Form -->
  <form action="/account/register" method="post" class="login-form">

    <label for="fname">First Name</label>
    <input type="text" id="fname" name="account_firstname" required value="<%= locals.account_firstname %>">

    <label for="lname">Last Name</label>
    <input type="text" id="lname" name="account_lastname" required value="<%= locals.account_lastname %>">

    <label for="email">Email</label>
    <input type="email" id="email" name="account_email" required value="<%= locals.account_email %>">

    <label for="password">Password</label>
    <div class="password-wrapper">
        <input 
        type="password" 
        name="account_password" 
        id="accountPassword"
        required
        pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
    >
    <button type="button" id="togglePassword" class="toggle-btn">
        Show
    </button>
    </div>

    <div class="password-rules">
        Passwords must be at least 12 characters and contain at least 1 number,  
        1 capital letter and 1 special character.
    </div>

    <button type="submit">Register</button>
  </form>
</main>
    <script>
    const toggle = document.getElementById("togglePassword");
    const password = document.getElementById("accountPassword");

    toggle.addEventListener("click", () => {
        const type = password.getAttribute("type") === "password" ? "text" : "password";
        password.setAttribute("type", type);
        toggle.textContent = type === "password" ? "Show" : "Hide";
    });
    </script>
</body>
</html>

